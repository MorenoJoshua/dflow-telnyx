{"version":3,"sources":["../../src/bot/index.js"],"names":["router","dflow","DialogFlow","config","token","parser","bodyParser","urlencoded","extended","post","req","res","next","body","query","sessionId","talk","then","send","c","data","result","telnyx","Telnyx","to","sendSMS","from"],"mappings":";;;;;;AAAA;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;AAEA,IAAMA,SAAS,sBAAf;;AAEA,IAAMC,QAAQ,IAAIC,yBAAJ,CAAeC,iBAAOD,UAAP,CAAkBE,KAAjC,CAAd;;AAEA,IAAMC,SAASC,qBAAWC,UAAX,CAAsB,EAACC,UAAU,IAAX,EAAtB,CAAf;;AAEAR,OAAOS,IAAP,CAAY,MAAZ,EAAoBJ,MAApB,EAA4B,UAACK,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,kBACnBF,IAAIG,IADe;AAAA,MACvCC,KADuC,aACvCA,KADuC;AAAA,MAChCC,SADgC,aAChCA,SADgC;;AAE9Cd,QAAMe,IAAN,CAAWD,SAAX,EAAsBD,KAAtB,EAA6BG,IAA7B,CAAkC;AAAA,WAAKN,IAAIO,IAAJ,CAASC,EAAEC,IAAF,CAAOC,MAAhB,CAAL;AAAA,GAAlC;AACD,CAHD;;AAMA,IAAMC,SAAS,IAAIC,uBAAJ,CAAWpB,iBAAOoB,MAAP,CAAcnB,KAAzB,CAAf;AACAJ,OAAOS,IAAP,CAAY,MAAZ,EAAoBJ,MAApB,EAA4B,UAACK,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,mBAC3BF,IAAIG,IADuB;AAAA,MACvCW,EADuC,cACvCA,EADuC;AAAA,MACnCX,IADmC,cACnCA,IADmC;;AAE9CS,SAAOG,OAAP,CAAeD,EAAf,EAAmBrB,iBAAOoB,MAAP,CAAcG,IAAjC,EAAuCb,IAAvC,EAA6CI,IAA7C,CAAkD;AAAA,WAAKN,IAAIO,IAAJ,CAASC,EAAEC,IAAX,CAAL;AAAA,GAAlD;AACD,CAHD;;kBAMepB,M","file":"index.js","sourcesContent":["import {Router} from 'express';\nimport DialogFlow from 'dialogflow-query';\n\nimport bodyParser from 'body-parser';\n\nimport Telnyx from 'telnyx-sendsms';\nimport config from './config';\n\nconst router = Router();\n\nconst dflow = new DialogFlow(config.DialogFlow.token);\n\nconst parser = bodyParser.urlencoded({extended: true});\n\nrouter.post('/bot', parser, (req, res, next) => {\n  const {query, sessionId} = req.body;\n  dflow.talk(sessionId, query).then(c => res.send(c.data.result));\n});\n\n\nconst telnyx = new Telnyx(config.Telnyx.token);\nrouter.post('/sms', parser, (req, res, next) => {\n  const {to, body} = req.body;\n  telnyx.sendSMS(to, config.Telnyx.from, body).then(c => res.send(c.data));\n});\n\n\nexport default router;\n"]}